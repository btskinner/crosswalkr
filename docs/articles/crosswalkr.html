<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to crosswalkr • crosswalkr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to crosswalkr">
<meta property="og:description" content="crosswalkr">
<meta property="og:image" content="https://www.btskinner.io/crosswalkr/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">crosswalkr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/crosswalkr.html">Get started</a>
</li>
<li>
  <a href="../articles/collapse.html">Collapsing</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    functions
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    news
  </a>
</li>
<li>
  <a href="https://github.com/btskinner/crosswalkr" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
<li>
  <a href="https://twitter.com/btskinner" class="external-link">
    <span class="fab fa-twitter"></span>
     
    twitter
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to crosswalkr</h1>
                        <h4 data-toc-skip class="author">Benjamin
Skinner</h4>
            
            <h4 data-toc-skip class="date">2024-03-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/btskinner/crosswalkr/blob/HEAD/vignettes/crosswalkr.Rmd" class="external-link"><code>vignettes/crosswalkr.Rmd</code></a></small>
      <div class="hidden name"><code>crosswalkr.Rmd</code></div>

    </div>

    
    
<p>Researchers often must compile master data sets from a number of
smaller data sets that are not consistent in terms of variable names or
value encodings. This can be especially true for large administrative
data sets that span multiple years and/or departments. Other times,
teams of researchers must work together to maintain a master data set
and it is important for replicability and future collaboration that the
team rely on consistent naming and encoding conventions.</p>
<p>For example, let’s say there are three flat files of student
information that need to be merged into a single large data set for
analysis.</p>
<div class="section level3">
<h3 id="file-1">File 1<a class="anchor" aria-label="anchor" href="#file-1"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th align="left">sid</th>
<th align="left">lname</th>
<th align="left">state</th>
<th align="left">t_score</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">Jackson</td>
<td align="left">VA</td>
<td align="left">74</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">Harrison</td>
<td align="left">KY</td>
<td align="left">86</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="left">Nixon</td>
<td align="left">IL</td>
<td align="left">78</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="file-2">File 2<a class="anchor" aria-label="anchor" href="#file-2"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th align="left">stu_id</th>
<th align="left">last_name</th>
<th align="left">st</th>
<th align="left">test_score</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">4</td>
<td align="left">Washington</td>
<td align="left">35</td>
<td align="left">92</td>
</tr>
<tr class="even">
<td align="left">5</td>
<td align="left">Roosevelt</td>
<td align="left">11</td>
<td align="left">67</td>
</tr>
<tr class="odd">
<td align="left">6</td>
<td align="left">Taylor</td>
<td align="left">47</td>
<td align="left">68</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="file-3">File 3<a class="anchor" aria-label="anchor" href="#file-3"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th align="left">s_id</th>
<th align="left">name</th>
<th align="left">sta</th>
<th align="left">score</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">7</td>
<td align="left">Tyler</td>
<td align="left">North Dakota</td>
<td align="left">91</td>
</tr>
<tr class="even">
<td align="left">8</td>
<td align="left">Grant</td>
<td align="left">South Dakota</td>
<td align="left">82</td>
</tr>
<tr class="odd">
<td align="left">9</td>
<td align="left">Adams</td>
<td align="left">Illinois</td>
<td align="left">89</td>
</tr>
</tbody>
</table>
<p>It is clear that these files contain the same basic information, but
neither the names nor encodings for <code>state</code> | <code>st</code>
| <code>sta</code> are consistent.</p>
<p>One solution is to just fix these one at a time before joining them.
For example:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/btskinner/crosswalkr" class="external-link">crosswalkr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://larmarange.github.io/labelled/" class="external-link">labelled</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://haven.tidyverse.org" class="external-link">haven</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df1</span> <span class="op">&lt;-</span> <span class="va">file_1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>id <span class="op">=</span> <span class="va">sid</span>,</span>
<span>           last_name <span class="op">=</span> <span class="va">lname</span>,</span>
<span>           stabbr <span class="op">=</span> <span class="va">stat</span>,</span>
<span>           score <span class="op">=</span> <span class="va">t_score</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="va">file_2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>id <span class="op">=</span> <span class="va">stu_id</span>,</span>
<span>           stabbr <span class="op">=</span> <span class="va">st</span>,</span>
<span>           score <span class="op">=</span> <span class="va">test_score</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>stabbr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">stabbr</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df3</span> <span class="op">&lt;-</span> <span class="va">file_3</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>id <span class="op">=</span> <span class="va">s_id</span>,</span>
<span>           stabbr <span class="op">=</span> <span class="va">sta</span>,</span>
<span>           last_name <span class="op">=</span> <span class="va">name</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">df1</span>, <span class="va">df2</span>, <span class="va">df3</span><span class="op">)</span></span>
<span><span class="va">df</span></span></code></pre></div>
<pre><code><span><span class="co">##   id  last_name       stabbr score</span></span>
<span><span class="co">## 1  1    Jackson           VA    74</span></span>
<span><span class="co">## 2  2   Harrison           KY    86</span></span>
<span><span class="co">## 3  3      Nixon           IL    78</span></span>
<span><span class="co">## 4  4 Washington           35    92</span></span>
<span><span class="co">## 5  5  Roosevelt           11    82</span></span>
<span><span class="co">## 6  6     Taylor           47    89</span></span>
<span><span class="co">## 7  7      Tyler North Dakota    91</span></span>
<span><span class="co">## 8  8      Grant South Dakota    82</span></span>
<span><span class="co">## 9  9      Adams     Illinois    89</span></span></code></pre>
<p>The problem, of course, is there is a lot of room for error since the
renaming process has to be repeated for each data frame.</p>
</div>
<div class="section level3">
<h3 id="using-a-crosswalk-file">Using a crosswalk file<a class="anchor" aria-label="anchor" href="#using-a-crosswalk-file"></a>
</h3>
<p>Instead, it makes more sense to create a crosswalk data set that
aligns old (or raw) column names with new (or clean) column names and,
if desired, labels. The <code>crosswalk</code> to join these files could
be:</p>
<table class="table">
<thead><tr class="header">
<th align="left">clean</th>
<th align="left">label</th>
<th align="left">file_1_raw</th>
<th align="left">file_2_raw</th>
<th align="left">file_3_raw</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">id</td>
<td align="left">Student ID</td>
<td align="left">sid</td>
<td align="left">stu_id</td>
<td align="left">s_id</td>
</tr>
<tr class="even">
<td align="left">last_name</td>
<td align="left">Student last name</td>
<td align="left">lname</td>
<td align="left">last_name</td>
<td align="left">name</td>
</tr>
<tr class="odd">
<td align="left">stabbr</td>
<td align="left">State abbreviation</td>
<td align="left">stat</td>
<td align="left">st</td>
<td align="left">sta</td>
</tr>
<tr class="even">
<td align="left">score</td>
<td align="left">Test score</td>
<td align="left">t_score</td>
<td align="left">test_score</td>
<td align="left">score</td>
</tr>
</tbody>
</table>
<p>The crosswalk file (<code>cw_file</code>) could be:</p>
<ol style="list-style-type: decimal">
<li>Data frame object already in memory<br>
</li>
<li>A string with path and name (<em>e.g.</em>,
<code>'./path/to/crosswalk.csv'</code>) of a flat file of one of the
following types:<br>
1. Comma separated (<code>*.csv</code>)<br>
2. Tab separated (<code>*.tsv</code>)<br>
3. Other delimited (<code>*.txt</code>) with <code>delimiter</code>
option set to delimiter string (<em>e.g.</em>,
<code>delimiter = '|'</code>)<br>
4. Excel (<code>*.xls</code> or <code>*.xlsx</code>) with
<code>sheet</code> option set to sheet number or string name (defaulting
to the first sheet)<br>
5. R data (<code>*.rdata</code>, <code>*.rda</code>,
<code>*.rds</code>)<br>
6. Stata data (<code>*.dta</code>)</li>
</ol>
<p>If given a string to the <code>cw_file</code> argument,
<code><a href="../reference/renamefrom.html">renamefrom()</a></code> and <code><a href="../reference/encodefrom.html">encodefrom()</a></code> determine the
type of file by its ending.</p>
</div>
<div class="section level2">
<h2 id="renaming">Renaming<a class="anchor" aria-label="anchor" href="#renaming"></a>
</h2>
<p>To rename using the <code><a href="../reference/renamefrom.html">renamefrom()</a></code> command:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/renamefrom.html">renamefrom</a></span><span class="op">(</span><span class="va">file_1</span>, cw_file <span class="op">=</span> <span class="va">crosswalk</span>, raw <span class="op">=</span> <span class="va">file_1_raw</span>, clean <span class="op">=</span> <span class="va">clean</span>, label <span class="op">=</span> <span class="va">label</span><span class="op">)</span></span>
<span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/renamefrom.html">renamefrom</a></span><span class="op">(</span><span class="va">file_2</span>, cw_file <span class="op">=</span> <span class="va">crosswalk</span>, raw <span class="op">=</span> <span class="va">file_2_raw</span>, clean <span class="op">=</span> <span class="va">clean</span>, label <span class="op">=</span> <span class="va">label</span><span class="op">)</span></span>
<span><span class="va">df3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/renamefrom.html">renamefrom</a></span><span class="op">(</span><span class="va">file_3</span>, cw_file <span class="op">=</span> <span class="va">crosswalk</span>, raw <span class="op">=</span> <span class="va">file_3_raw</span>, clean <span class="op">=</span> <span class="va">clean</span>, label <span class="op">=</span> <span class="va">label</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">df1</span>, <span class="va">df2</span>, <span class="va">df3</span><span class="op">)</span></span>
<span><span class="va">df</span></span></code></pre></div>
<pre><code><span><span class="co">##   id  last_name       stabbr score</span></span>
<span><span class="co">## 1  1    Jackson           VA    74</span></span>
<span><span class="co">## 2  2   Harrison           KY    86</span></span>
<span><span class="co">## 3  3      Nixon           IL    78</span></span>
<span><span class="co">## 4  4 Washington           35    92</span></span>
<span><span class="co">## 5  5  Roosevelt           11    82</span></span>
<span><span class="co">## 6  6     Taylor           47    89</span></span>
<span><span class="co">## 7  7      Tyler North Dakota    91</span></span>
<span><span class="co">## 8  8      Grant South Dakota    82</span></span>
<span><span class="co">## 9  9      Adams     Illinois    89</span></span></code></pre>
<p>And check out the labels:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://larmarange.github.io/labelled/reference/var_label.html" class="external-link">var_label</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $id</span></span>
<span><span class="co">## [1] "Student ID"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $last_name</span></span>
<span><span class="co">## [1] "Student last name"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $stabbr</span></span>
<span><span class="co">## [1] "State abbreviation"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $score</span></span>
<span><span class="co">## [1] "Test score"</span></span></code></pre>
<p>As new raw data files are added to the project, they could simply be
given a new column in the crosswalk file that mapped their raw column
names to the clean versions.</p>
</div>
<div class="section level2">
<h2 id="encoding">Encoding<a class="anchor" aria-label="anchor" href="#encoding"></a>
</h2>
<p>These same example files have inconsistent encodings for state: one
uses two-letter abbreviations, another the FIPS code, and another the
full name. Again, instead of fixing each one at a time, a separate
crosswalk for encoding these values could be used. The
<code>crosswalkr</code> package includes a state-level crosswalk,
<code>stcrosswalk</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">stcrosswalk</span><span class="op">)</span></span>
<span><span class="va">stcrosswalk</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 51 × 7</span></span></span>
<span><span class="co">##    stfips stabbr stname               cenreg cenregnm  cendiv cendivnm          </span></span>
<span><span class="co">##     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>      1 AL     Alabama                   3 South          6 East South Central</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>      2 AK     Alaska                    4 West           9 Pacific           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>      4 AZ     Arizona                   4 West           8 Mountain          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>      5 AR     Arkansas                  3 South          7 West South Central</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>      6 CA     California                4 West           9 Pacific           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>      8 CO     Colorado                  4 West           8 Mountain          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>      9 CT     Connecticut               1 Northeast      1 New England       </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>     10 DE     Delaware                  3 South          5 South Atlantic    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>     11 DC     District of Columbia      3 South          5 South Atlantic    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>     12 FL     Florida                   3 South          5 South Atlantic    </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 41 more rows</span></span></span></code></pre>
<p>The <code><a href="../reference/encodefrom.html">encodefrom()</a></code> function works much like
<code><a href="../reference/renamefrom.html">renamefrom()</a></code>. The only difference is that a vector of
encoded values is returned that can be added to an existing
dataframe.</p>
<p><code><a href="../reference/encodefrom.html">encodefrom()</a></code> returns either base R factors or labels
depending on whether the input data frame is a tibble.</p>
<div class="section level4">
<h4 id="factor">factor<a class="anchor" aria-label="anchor" href="#factor"></a>
</h4>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df1</span><span class="op">$</span><span class="va">state</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/encodefrom.html">encodefrom</a></span><span class="op">(</span><span class="va">file_1</span>, var <span class="op">=</span> <span class="va">stat</span>, <span class="va">stcrosswalk</span>, raw <span class="op">=</span> <span class="va">stabbr</span>, clean <span class="op">=</span> <span class="va">stfips</span>, label <span class="op">=</span> <span class="va">stname</span><span class="op">)</span></span>
<span><span class="va">df1</span></span></code></pre></div>
<pre><code><span><span class="co">##   id last_name stabbr score    state</span></span>
<span><span class="co">## 1  1   Jackson     VA    74 Virginia</span></span>
<span><span class="co">## 2  2  Harrison     KY    86 Kentucky</span></span>
<span><span class="co">## 3  3     Nixon     IL    78 Illinois</span></span></code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">df1</span>, <span class="va">class</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##          id   last_name      stabbr       score       state </span></span>
<span><span class="co">##   "integer" "character" "character"   "numeric"    "factor"</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="labelled-vector">labelled vector<a class="anchor" aria-label="anchor" href="#labelled-vector"></a>
</h4>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file_1_</span> <span class="op">&lt;-</span> <span class="va">file_1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl_df.html" class="external-link">tbl_df</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: `tbl_df()` was deprecated in dplyr 1.0.0.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Please use `tibble::as_tibble()` instead.</span></span>
<span><span class="co">## <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">## <span style="color: #555555;">generated.</span></span></span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df1</span><span class="op">$</span><span class="va">state</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/encodefrom.html">encodefrom</a></span><span class="op">(</span><span class="va">file_1_</span>, var <span class="op">=</span> <span class="va">stat</span>, <span class="va">stcrosswalk</span>, raw <span class="op">=</span> <span class="va">stabbr</span>,</span>
<span>                        clean <span class="op">=</span> <span class="va">stfips</span>, label <span class="op">=</span> <span class="va">stname</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="va">df1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   id last_name stabbr score    state</span></span>
<span><span class="co">## 1  1   Jackson     VA    74 Virginia</span></span>
<span><span class="co">## 2  2  Harrison     KY    86 Kentucky</span></span>
<span><span class="co">## 3  3     Nixon     IL    78 Illinois</span></span></code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://haven.tidyverse.org/reference/zap_labels.html" class="external-link">zap_labels</a></span><span class="op">(</span><span class="va">df1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   id last_name stabbr score state</span></span>
<span><span class="co">## 1  1   Jackson     VA    74    51</span></span>
<span><span class="co">## 2  2  Harrison     KY    86    21</span></span>
<span><span class="co">## 3  3     Nixon     IL    78    17</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="combined-example-dplyr-chain">Combined example: <code>dplyr</code> chain<a class="anchor" aria-label="anchor" href="#combined-example-dplyr-chain"></a>
</h2>
<p>The <code><a href="../reference/renamefrom.html">renamefrom()</a></code> and <code><a href="../reference/encodefrom.html">encodefrom()</a></code> functions
can be combined in a <code>dplyr</code> chain.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">file_1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl_df.html" class="external-link">tbl_df</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>            <span class="fu"><a href="../reference/renamefrom.html">renamefrom</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">crosswalk</span>, <span class="va">file_1_raw</span>, <span class="va">clean</span>, <span class="va">label</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>stabbr <span class="op">=</span> <span class="fu"><a href="../reference/encodefrom.html">encodefrom</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">stabbr</span>, <span class="va">stcrosswalk</span>, <span class="va">stabbr</span>, <span class="va">stfips</span>, <span class="va">stname</span><span class="op">)</span><span class="op">)</span>,</span>
<span></span>
<span>            <span class="co">## append file 2</span></span>
<span>            <span class="va">file_2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl_df.html" class="external-link">tbl_df</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>            <span class="fu"><a href="../reference/renamefrom.html">renamefrom</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">crosswalk</span>, <span class="va">file_2_raw</span>, <span class="va">clean</span>, <span class="va">label</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>stabbr <span class="op">=</span> <span class="fu"><a href="../reference/encodefrom.html">encodefrom</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">stabbr</span>, <span class="va">stcrosswalk</span>, <span class="va">stfips</span>, <span class="va">stfips</span>, <span class="va">stname</span><span class="op">)</span><span class="op">)</span>,</span>
<span></span>
<span>            <span class="co">## append file 3</span></span>
<span>            <span class="va">file_3</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl_df.html" class="external-link">tbl_df</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>            <span class="fu"><a href="../reference/renamefrom.html">renamefrom</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">crosswalk</span>, <span class="va">file_3_raw</span>, <span class="va">clean</span>, <span class="va">label</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>stabbr <span class="op">=</span> <span class="fu"><a href="../reference/encodefrom.html">encodefrom</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">stabbr</span>, <span class="va">stcrosswalk</span>, <span class="va">stname</span>, <span class="va">stfips</span>, <span class="va">stname</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: `tbl_df()` was deprecated in dplyr 1.0.0.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Please use `tibble::as_tibble()` instead.</span></span>
<span><span class="co">## <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">## <span style="color: #555555;">generated.</span></span></span></code></pre>
<pre><code><span><span class="co">## Warning: `tbl_df()` was deprecated in dplyr 1.0.0.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Please use `tibble::as_tibble()` instead.</span></span>
<span><span class="co">## <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">## <span style="color: #555555;">generated.</span></span></span></code></pre>
<pre><code><span><span class="co">## Warning: `tbl_df()` was deprecated in dplyr 1.0.0.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Please use `tibble::as_tibble()` instead.</span></span>
<span><span class="co">## <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">## <span style="color: #555555;">generated.</span></span></span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 9 × 4</span></span></span>
<span><span class="co">##      id last_name  stabbr                    score</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int+lbl&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>     1 Jackson    51<span style="color: #949494;"> [Virginia]</span>                74</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>     2 Harrison   21<span style="color: #949494;"> [Kentucky]</span>                86</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>     3 Nixon      17<span style="color: #949494;"> [Illinois]</span>                78</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>     4 Washington 35<span style="color: #949494;"> [New Mexico]</span>              92</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>     5 Roosevelt  11<span style="color: #949494;"> [District of Columbia]</span>    82</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>     6 Taylor     47<span style="color: #949494;"> [Tennessee]</span>               89</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">7</span>     7 Tyler      38<span style="color: #949494;"> [North Dakota]</span>            91</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">8</span>     8 Grant      46<span style="color: #949494;"> [South Dakota]</span>            82</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">9</span>     9 Adams      17<span style="color: #949494;"> [Illinois]</span>                89</span></span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>            </span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 9 × 4</span></span></span>
<span><span class="co">##      id last_name  stabbr               score</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>     1 Jackson    Virginia                74</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>     2 Harrison   Kentucky                86</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>     3 Nixon      Illinois                78</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>     4 Washington New Mexico              92</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>     5 Roosevelt  District of Columbia    82</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>     6 Taylor     Tennessee               89</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">7</span>     7 Tyler      North Dakota            91</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">8</span>     8 Grant      South Dakota            82</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">9</span>     9 Adams      Illinois                89</span></span></code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://www.btskinner.io" class="external-link">Benjamin Skinner</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
